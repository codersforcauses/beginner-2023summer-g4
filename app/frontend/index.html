<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="/static/css/styles.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lalezar&family=Roboto&display=swap" rel="stylesheet">
    
    <title>PerthPinpoint</title>
</head>
<body style="overflow: auto; overflow-x: hidden;">
    <div class="landing-page">
        <header>
            <h1 class = 'landing-title heading' style = 'margin-top: 0; margin-bottom: 0;'><a href="/">PerthPinpoint</a></h1>
            <nav>
                <a href="/">Home</a>
                <a href="/tutorial">Tutorial</a>
                <a href="/leaderboard">Leaderboard</a>
            </nav>
        </header>

        <div class = 'login-container'>
            <div class = 'login-bar'>
                <div class = 'sub-heading heading'>Enter a username</div>
                <p>To play PerthPinpoint enter a username that you would like to play with. This username will appear on the leaderboard
                    if you get a top score
                </p>
                <input type="text" id="username" name="username" required placeholder="Enter a Username...">
            </div>
            <img class="landing-image" src ="/static/assets/perth-image.jpg">

            <script>
                if (localStorage.getItem("username")) {
                  document.getElementById("username").value = localStorage.getItem("username");
                }
                // document.querySelector("form").addEventListener("submit", function(event) {
                //   event.preventDefault(); 
                //   var username = document.getElementById("username").value;
                //   localStorage.setItem("username", username);
                // });
            </script>
        </div>


        <!-- Game mode options -->
        <div class= "game-modes-submit">
            <div class="game-modes">
                <div class="game-mode-title sub-heading heading">Select a Game Mode</div>
                <p>
                    Select a game mode to play.<br> Each game mode has a different objective and different rules.
                    Visit the <a href="/tutorial">tutorial page</a> to learn more about each game mode.
                </p>
                <div class="game-mode-options">
                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="city">
                        <img src="/static/assets/bell_tower.png" alt="Classic City Image">
                        <div class="game-mode-label heading">Classic City</div>
                        <button class = 'game-submit' onclick= "enterMainPage('city')">Play Now</button>
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="sleuth">
                        <img src="/static/assets/kwinana-freeway-stock-image.webp" alt="Street Sleuth Image">
                        <div class="game-mode-label heading">Streeth Sleuth</div>
                        <button class = 'game-submit' onclick= "enterMainPage('sleuth')">Play Now</button>
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="landmark">
                        <img src="/static/assets/cactus.jpg" alt="Local Landmark Image">
                        <div class="game-mode-label heading">Local Landmark</div>
                        <button class = 'game-submit' onclick= "enterMainPage('landmark')">Play Now</button>
                    </label>
                </div>
            </div>
        </div>


    </div>
    
    <script>
        function enterMainPage(selectedMode) {
            const username = document.getElementById('username').value;

            if (!username){
                //alert("Please enter a username!");
                // window.location.href = "/";

                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });

                document.querySelector(".login-bar input").style.border = "3px solid red";

                return;
            }

            document.querySelector(".login-bar input").style.border = "3px solid red";

            localStorage.setItem("game_mode", selectedMode);
            localStorage.setItem("username", username);

            if (selectedMode === "city") {
                window.location.href = "/city";
            }
            else if (selectedMode == "discoveries"){
                alert("we havent made this gamemode yet :)");
                window.location.href = "/"; // /discoveries
            }
            else if (selectedMode == "sleuth"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/sleuth";
            }
            else if (selectedMode == "landmark"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/landmark";
            }
            
        }
    </script>
</body>
</html>