<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="/static/css/styles.css">
    <title>PerthPinpoint</title>
</head>
<body style="overflow: auto; overflow-x: hidden;">
    <div class="landing-page">
        <header>
            <h1 class = 'landing-title'>PerthPinpoint</h1>
        </header>
        <div class = 'login-container'>
            <img class="landing-image" src ="/static/assets/perth-cbd-night-opac-full.png">
            <div class = 'login-bar'>
                <h2>Enter a username</h2>
                <input type="text" id="username" name="username" required placeholder="Enter a username...">
            </div>

            <script>
                if (localStorage.getItem("username")) {
                  document.getElementById("username").value = localStorage.getItem("username");
                }
                document.querySelector("form").addEventListener("submit", function(event) {
                  event.preventDefault(); 
                  var username = document.getElementById("username").value;
                  localStorage.setItem("username", username);
                });
              </script>

              
        </div>


        <!-- Game mode options -->
        <div class= "game-modes-submit">
            <div class="game-modes">
                <div class="game-mode-title">
                    <h2 >Select a Game Mode</h2>
                </div>
                <div class="game-mode-options">
                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="city"> 
                        <div class="game-mode-label"><strong>Classic City</strong></div>
                        <!-- Additional information or description for the option can be added here -->
                        <div class="game-mode-desc" style="font-size: 24px;">
                            <p>You will be dropped in a random location within Perth. You are free to explore the location as much as you wish. Your goal is to guess the original location before the timer runs out!</p>
                        </div>
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="discoveries">
                        <div class="game-mode-label"><strong>Divs Discoveries</strong></div>
                        <!-- Additional information or description for the option can be added here -->
                        <div class="game-mode-desc" style="font-size: 24px;">
                            <p>Divs special mode.</p>
                        </div>        
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="sleuth">
                        <div class="game-mode-label"><strong>Streeth Sleuth</strong></div>
                        <!-- Additional information or description for the option can be added here -->
                        <div class="game-mode-desc" style="font-size: 24px;">
                            <p>Street sleuth description</p>
                        </div>  
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="landmark">
                        <div class="game-mode-label"><strong>Local Landmark</strong></div>
                        <!-- Additional information or description for the option can be added here -->
                        <div class="game-mode-desc" style="font-size: 24px;">
                            <p>You will be dropped in a random prominent location in Perth, this may be the CBD, Fremantle, etc. This time you know where you have been dropped and will be asked to find 5 different locations within an area by pin pointing them. The catch is, the map contains no labels! Use the street imagery to help you.</p>
                        </div>  
                    </label>
                </div>
            </div>
            
            <div class="start-button-container">
                <p><strong>Click the start button to begin playing!</strong></p>
                <button id= "game-button" onclick= "enterMainPage()"><strong>Start Game</strong></button>
            </div>
        </div>


    </div>
    
    <script>
        function enterMainPage() {
            const username = document.getElementById('username').value;
            const selectedMode = document.querySelector('input[name="gameMode"]:checked');

            if (!username){
                alert("Please enter a username!");
                window.location.href = "/";
            }

            if (!selectedMode){
                alert("Please select a game mode before entering the main page.");
                window.location.href = "/";
            }
            localStorage.setItem("game_mode", selectedMode.value);
            localStorage.setItem("username", username);

            if (selectedMode.value === "city") {
                window.location.href = "/city";
            }
            else if (selectedMode.value == "discoveries"){
                alert("we havent made this gamemode yet :)");
                window.location.href = "/"; // /discoveries
            }
            else if (selectedMode.value == "sleuth"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/sleuth";
            }
            else if (selectedMode.value == "landmark"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/landmark";
            }
            else {
                window.location.href = "/";
            }
            
        }
    </script>
</body>
</html>