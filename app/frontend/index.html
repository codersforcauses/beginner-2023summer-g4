<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">
    <link rel="stylesheet" type="text/css" href="/static/css/styles.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100&display=swap" rel="stylesheet">
    
    <title>PerthPinpoint</title>
</head>
<body style="overflow: auto; overflow-x: hidden;">
    <div class="landing-page">
        <header>
            <h1 class = 'landing-title'><a href="/">PerthPinpoint</a></h1>
            <nav>
                <a href="/">Home</a>
                <a href="/tutorial">Tutorial</a>
                <a href="/leaderboard">Leaderboard</a>
            </nav>
        </header>

        <div class = 'login-container'>
            <div class = 'login-bar'>
                <div class = 'sub-heading'>Enter a username</div>
                <p>To play PerthPinpoint enter a username that you would like to play with. This username will appear on the leaderboard
                    if you get a top score
                </p>
                <input type="text" id="username" name="username" required placeholder="Enter a Username...">
            </div>
            <img class="landing-image" src ="/static/assets/perth-image.jpg">

            <script>
                if (localStorage.getItem("username")) {
                  document.getElementById("username").value = localStorage.getItem("username");
                }
                document.querySelector("form").addEventListener("submit", function(event) {
                  event.preventDefault(); 
                  var username = document.getElementById("username").value;
                  localStorage.setItem("username", username);
                });
            </script>
        </div>


        <!-- Game mode options -->
        <div class= "game-modes-submit">
            <div class="game-modes">
                <div class="game-mode-title sub-heading">Select a Game Mode</div>
                <p>
                    Select a game mode to play.<br> Each game mode has a different objective and different rules.
                    Visit the <a href="/tutorial">tutorial page</a> to learn more about each game mode.
                </p>
                <div class="game-mode-options">
                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="city">
                        <img src="/static/assets/city-pfp.png" alt="Classic City Image">
                        <div class="game-mode-label"><strong>Classic City</strong></div>
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="sleuth">
                        <img src="/static/assets/sleuth-pfp.png" alt="Street Sleuth Image">
                        <div class="game-mode-label"><strong>Streeth Sleuth</strong></div>
                    </label>

                    <label class="game-mode-option">
                        <input type="radio" name="gameMode" value="landmark">
                        <img src="/static/assets/landmark-pfp.png" alt="Local Landmark Image">
                        <div class="game-mode-label"><strong>Local Landmark</strong></div>
                    </label>
                </div>
            </div>
            
            <div class="start-button-container">
                <p style = "color: black;"><strong>Click the start button to begin playing!</strong></p>
                <button id= "game-button" onclick= "enterMainPage()"><strong>Start Game</strong></button>
            </div>
        </div>


    </div>
    
    <script>
        function enterMainPage() {
            const username = document.getElementById('username').value;
            const selectedMode = document.querySelector('input[name="gameMode"]:checked');

            if (!username){
                alert("Please enter a username!");
                window.location.href = "/";
                return;
            }

            if (!selectedMode){
                alert("Please select a game mode before entering the main page.");
                window.location.href = "/";
                return;
            }
            localStorage.setItem("game_mode", selectedMode.value);
            localStorage.setItem("username", username);

            if (selectedMode.value === "city") {
                window.location.href = "/city";
            }
            else if (selectedMode.value == "discoveries"){
                alert("we havent made this gamemode yet :)");
                window.location.href = "/"; // /discoveries
            }
            else if (selectedMode.value == "sleuth"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/sleuth";
            }
            else if (selectedMode.value == "landmark"){
                alert("WARNING: This Game Mode May not (yet) Work Properly!");
                window.location.href = "/landmark";
            }
            else {
                window.location.href = "/";
            }
            
        }
    </script>
</body>
</html>